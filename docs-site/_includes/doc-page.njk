{% set doc = gid | docFromGid %}

{% set parent = doc.parent | docFromGid %}
<p>
	{% if parent %}
		<a href="{{ parent.url }}">&larr; {{ parent.url }}</a>
	{% elif doc.url != '/' %}
		<a href="/">&larr; /</a>
	{% else %}
		/
	{% endif %}
</p>

<h1
	data-editable="text"
	data-prop="@file[/docs/documentation/{{ doc.gid }}.yml].title"
>{{ doc.title | default(doc.key, true) }}</h1>

<dl>
	{% if appears_in | length %}
		<dt>Appears in:</dt>
		{% for parentGid in appears_in %}
			{% set parentDoc = parentGid | docFromGid %}
			<dd><a href="{{ parentDoc.url }}"><code>{{ parentDoc.full_key | default(parentDoc.title, true) }}</code></a></dd>
		{% endfor %}
	{% endif %}

	{% if key %}
		<dt>Key:</dt>
		<dd><code>{{ key }}</code></dd>
	{% endif %}

	{% if full_key %}
		<dt>Full key:</dt>
		<dd><code>{{ full_key }}</code></dd>
	{% endif %}

	<dt>GID:</dt>
	<dd><code>{{ gid }}</code></dd>

	{% if not anyOf | length %}
		<dt>Type:</dt>
		<dd>
			<code>{% renderFile "./_includes/doc-type.njk", doc %}</code>

			{%- if required %}
				<small style="color: red;">(Required)</small>
			{%- endif -%}
		</dd>
	{% endif %}

	{% set description = documentation.description | default(developer_documentation.description, true) %}
	{% if description %}
		<dt>Description:</dt>
		<dd
			data-editable="text"
			data-prop="@file[/docs/documentation/{{ gid }}.yml].description"
		>{{ description | renderContent('md') | safe }}</dd>
	{% endif %}

	{% if default %}
		<dt>Default value:</dt>
		<dd><code>{{ default }}</code></dd>
	{% endif %}

	{% if enum | length %}
		<dt>Allowed values:</dt>
		{% for value in enum %}
			<dd><code>{{ value }}</code></dd>
		{% endfor %}
	{% endif %}

	{% if documentation.examples | length %}
		<dt>Examples:</dt>
		<editable-array data-prop="@file[/docs/documentation/{{ gid }}.yml].examples">
			{% for example in documentation.examples %}
				<dd data-editable="array-item">
					<pre><code>{{ example }}</code></pre>
				</dd>
			{% endfor %}
		</editable-array>
	{% endif %}

	{% if type == "array" %}
		{% renderFile "./_includes/pages/array.njk", doc %}
	{% elif type == "object" %}
		{% renderFile "./_includes/pages/object.njk", doc %}
	{% elif anyOf | length %}
		{% renderFile "./_includes/pages/any-of.njk", doc %}
	{% endif %}
</dl>

<hr>

<details>
	<summary>Raw data</summary>
	<pre><code>{{ doc | json }}</code></pre>
</details>
